<!DOCTYPE html>
<html>
<head>
    <title>Custom Map with GPS</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        #map { height: 100vh; }
    </style>
</head>
<body>
    <div id="map"></div>
    <script>
        // Fixed location coordinates (latitude, longitude) and zoom level
        const fixedLocation = [45.8, 13.7492]; // Example: Volčji Grad coordinates
        const zoomLevel = 13.4; // Adjust as needed (it only takes full from 0.5 to 1.4 scaling)

        // Initialize the map
        const map = L.map('map').setView(fixedLocation, zoomLevel);

        // Add OpenStreetMap tiles
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '© OpenStreetMap contributors'
        }).addTo(map);

        // Define locations with names and coordinates
        const locations = [
            { name: "Ozidje", coords: [45.77921, 13.71346] },
            { name: "Ograda", coords: [45.78753, 13.70965] },
            { name: "Blok Brje", coords: [45.78234, 13.70174] },
            { name: "Dolge njive", coords: [45.77187, 13.72205] },
            { name: "Prelovci", coords: [45.80755, 13.78482] },
            { name: "Močilo", coords: [45.80435, 13.78801] },
            { name: "Kosmati Hrib", coords: [45.79292, 13.76860] },
            { name: "Gmajna", coords: [45.79842, 13.77549] },
            { name: "Gredine", coords: [45.79085, 13.78704] },
            { name: "Pdunce", coords: [45.81382, 13.77457] },
            { name: "Java", coords: [45.79022, 13.77550] },
            { name: "Prjovščina", coords: [45.79507, 13.79978] },
            { name: "Oklade", coords: [45.80297, 13.79376] },
            { name: "Brniščik", coords: [45.79905, 13.78518] },
            { name: "Alu Komen", coords: [45.81253, 13.73550] },
            { name: "Komenšček", coords: [45.82338, 13.75717] },
            { name: "Dolci", coords: [45.83910, 13.77601] },
            { name: "Zaboršt", coords: [45.81344, 13.76914] },
            { name: "Dolce", coords: [45.83553, 13.76899] },
            { name: "Novakovo", coords: [45.82965, 13.78589] },
            { name: "Moškovec", coords: [45.82529, 13.78729] },
            { name: "13 Maj", coords: [45.82087, 13.78536] },
            { name: "Kregolišče", coords: [45.78225, 13.73972] },
            { name: "Škofi", coords: [45.78545, 13.73229] },
            { name: "Nadruški Bori", coords: [45.78789, 13.73065] },
            { name: "Preža Kompleks", coords: [45.78536, 13.74660] },
            { name: "Plesi", coords: [45.79713, 13.75869] },
            { name: "Pdunce", coords: [45.80223, 13.75971] },
            { name: "Kompleks", coords: [45.79232, 13.75378] },
            { name: "Polje", coords: [45.79741, 13.71924] },
            { name: "Mersce", coords: [45.78856, 13.69808] },
            { name: "Dolge Njive", coords: [45.79216, 13.71298] },
            { name: "Kovčiči", coords: [45.80273, 13.72457] },
            { name: "Jurjevšče", coords: [45.80043, 13.72817] },
            { name: "Hovalice", coords: [45.77537, 13.74425] },
            { name: "Sekevc", coords: [45.77117, 13.74294] },
            { name: "Mali vrhi", coords: [45.76594, 13.74307] }
        ];

        // Add small dots as markers (these will be on the default pane with higher zIndex)
locations.forEach(location => {
    L.circleMarker(location.coords, {
        radius: 5,       // Dot size
        color: '#3388ff',  // Blue color for the dot
        fillColor: '#3388ff',
        fillOpacity: 1
    }).addTo(map).bindPopup(location.name);
});

         // Define the boundary of the hunting grounds as a polygon
         const huntingGroundsBoundary = [
            [45.79421, 13.67933], 
            [45.79456, 13.68003], 
            [45.7944, 13.6808], 
            [45.79476, 13.68289], 
            [45.79477, 13.68387],
            [45.79461, 13.68467], 
            [45.79468, 13.68493], 
            [45.79513, 13.6852], 
            [45.79571, 13.68758],
            [45.79658, 13.68913], 
            [45.79638, 13.69251], 
            [45.79795, 13.69392], 
            [45.79921, 13.69766],
            [45.79804, 13.70011],
            [45.79821, 13.70128], 
            [45.79791, 13.706], 
            [45.79731, 13.70796], 
            [45.79733, 13.71067],
            [45.79804, 13.71073],
            [45.79944, 13.71008],
            [45.8005, 13.71105],
            [45.80172, 13.71127],
            [45.80247, 13.71444],
            [45.80345, 13.71465],
            [45.80476, 13.7171],
            [45.8061, 13.71934],
            [45.8066, 13.7234],
            [45.81053, 13.72879],
            [45.81411, 13.73654],
            [45.81445, 13.74127],
            [45.81482, 13.74239],
            [45.81664, 13.74506],
            [45.81757, 13.74757],
            [45.81755, 13.74862],
            [45.81819, 13.74924],
            [45.81984, 13.74955],
            [45.82186, 13.75258],
            [45.8252, 13.75628],
            [45.82845, 13.76078],
            [45.83242, 13.76444],
            [45.83831, 13.76613],
            [45.83938, 13.76646],
            [45.8406, 13.7687],
            [45.84124, 13.77165],
            [45.84097, 13.77152],
            [45.84075, 13.77327],
            [45.84049, 13.77628],
            [45.83971, 13.77864],
            [45.83818, 13.78254],
            [45.83648, 13.78633],
            [45.83385, 13.78987],
            [45.83382, 13.79013],
            [45.83307, 13.79068],
            [45.83182, 13.79189],
            [45.8309, 13.79229],
            [45.82949, 13.79234],
            [45.82945, 13.79242],
            [45.82904, 13.79229],
            [45.82884, 13.79237],
            [45.82769, 13.79216],
            [45.8258, 13.79146],
            [45.82575, 13.79153],
            [45.82554, 13.79135],
            [45.82379, 13.79067],
            [45.82363, 13.79051],
            [45.8233, 13.78984],
            [45.82278, 13.78926],
            [45.82226, 13.7889],
            [45.82162, 13.78816],
            [45.82084, 13.78803],
            [45.81993, 13.78823],
            [45.81887, 13.78832],
            [45.81752, 13.7887],
            [45.817, 13.78863],
            [45.81604, 13.78924],
            [45.8152, 13.79034],
            [45.81445, 13.79079],
            [45.81419, 13.79135],
            [45.81352, 13.79205],
            [45.81325, 13.79205],
            [45.8132, 13.79238],
            [45.81259, 13.79347],
            [45.81232, 13.7945],
            [45.81185, 13.79402],
            [45.81184, 13.79388],
            [45.81011, 13.79526],
            [45.81001, 13.79545],
            [45.80995, 13.79588],
            [45.80968, 13.796],
            [45.80938, 13.79573],
            [45.8093, 13.79618],
            [45.80879, 13.79652],
            [45.80911, 13.7977],
            [45.8091, 13.79836],
            [45.80884, 13.79875],
            [45.80731, 13.79887],
            [45.80669, 13.79921],
            [45.80579, 13.79932],
            [45.80411, 13.79997],
            [45.80376, 13.79991],
            [45.80248, 13.79934],
            [45.80174, 13.79948],
            [45.80058, 13.79889],
            [45.79932, 13.79841],
            [45.79844, 13.79835],
            [45.79604, 13.79985],
            [45.79514, 13.8004],
            [45.79472, 13.80065],
            [45.79427, 13.80064],
            [45.79391, 13.80034],
            [45.79402, 13.7986],
            [45.79397, 13.79857],
            [45.79396, 13.79768],
            [45.79341, 13.79658],
            [45.79325, 13.7958],
            [45.79285, 13.79481],
            [45.79255, 13.79409],
            [45.79219, 13.79271],
            [45.79192, 13.7927],
            [45.79184, 13.79138],
            [45.79165, 13.79101],
            [45.79141, 13.79124],
            [45.79126, 13.79099],
            [45.79155, 13.7908],
            [45.78994, 13.78742],
            [45.78947, 13.78666],
            [45.78894, 13.78711],
            [45.78856, 13.7865],
            [45.78882, 13.78604],
            [45.78923, 13.78608],
            [45.78901, 13.78521],
            [45.78887, 13.78305],
            [45.78824, 13.78283],
            [45.78818, 13.78197],
            [45.78836, 13.7818],
            [45.78863, 13.78207],
            [45.7888, 13.78194],
            [45.78849, 13.7789],
            [45.78838, 13.77668],
            [45.78828, 13.77448],
            [45.7879, 13.76873],
            [45.78728, 13.76771],
            [45.78728, 13.76748],
            [45.78708, 13.76729],
            [45.78525, 13.76356],
            [45.78576, 13.75934],
            [45.78653, 13.75368],
            [45.78536, 13.75327],
            [45.78447, 13.75289],
            [45.78341, 13.75289],
            [45.78149, 13.7535],
            [45.78073, 13.7535],
            [45.7801, 13.75306],
            [45.77933, 13.75294],
            [45.77897, 13.75262],
            [45.77858, 13.75202],
            [45.77732, 13.75134],
            [45.7757, 13.75096],
            [45.77447, 13.75332],
            [45.7737, 13.75307],
            [45.77351, 13.75562],
            [45.77288, 13.75589],
            [45.77177, 13.75518],
            [45.77136, 13.75431],
            [45.77094, 13.7543],
            [45.77032, 13.75488],
            [45.76791, 13.75448],
            [45.76662, 13.75324],
            [45.76577, 13.75312],
            [45.76508, 13.75235],
            [45.76442, 13.75311],
            [45.76353, 13.75313],
            [45.76248, 13.75284],
            [45.76121, 13.7522],
            [45.76103, 13.75032],
            [45.76077, 13.74941],
            [45.76048, 13.74888],
            [45.76014, 13.74889],
            [45.75939, 13.74948],
            [45.75938, 13.74863],
            [45.75921, 13.7482],
            [45.75887, 13.748],
            [45.7584, 13.75021],
            [45.75802, 13.75108],
            [45.75786, 13.75039],
            [45.75794, 13.75003],
            [45.75772, 13.74917],
            [45.75738, 13.74858],
            [45.7572, 13.74894],
            [45.75768, 13.75065],
            [45.75743, 13.75113],
            [45.7576, 13.75306],
            [45.75675, 13.75547],
            [45.75595, 13.75555],
            [45.7556, 13.75575],
            [45.75531, 13.74592],
            [45.758, 13.73992],
            [45.7597, 13.73851],
            [45.75959, 13.73554],
            [45.76104, 13.73352],
            [45.76139, 13.73389],
            [45.76183, 13.7374],
            [45.76345, 13.73516],
            [45.76656, 13.72972],
            [45.76845, 13.72284],
            [45.77085, 13.71811],
            [45.77505, 13.70824],
            [45.7793, 13.70075],
            [45.78291, 13.69701],
            [45.78759, 13.69003],
            [45.79005, 13.6863],
            [45.792, 13.68216],
            [45.79281, 13.68035],
            [45.7942, 13.67934]
        ];
            // Create a custom pane for the polygon
        map.createPane('polygonPane');
        map.getPane('polygonPane').style.zIndex = 300; // Lower zIndex for the polygon

            // Add the polygon to the map using the custom pane
        const huntingGrounds = L.polygon(huntingGroundsBoundary, {
            color: 'green',      // Border color
            weight: 3,           // Border thickness
            fillColor: 'rgba(0,128,0,0.3)', // Transparent green fill
            fillOpacity: 0.4,    // Fill transparency
            pane: 'polygonPane'  // Add the polygon to the custom pane
        }).addTo(map);

        // Add a popup to the polygon
        huntingGrounds.bindPopup("Lovišče Dolce Komen");

        // Get GPS location and add a marker
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(position => {
                const { latitude, longitude } = position.coords;

                // Add a marker for the user's location
                L.marker([latitude, longitude]).addTo(map).bindPopup('Moja lokacija').openPopup();
            }, error => {
                alert('Lokacije ni mogoče zaznati: ' + error.message);
            });
        } else {
            alert('Vaša naprava ne dovoli geolokacije.');
        }
    </script>
</body>
</html>
